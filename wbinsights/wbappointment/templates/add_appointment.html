{% extends 'base020.html' %}
{% load static %}
{% block center_col %}
{% load i18n %}
{% load web_tags %}

<link rel="stylesheet" href="{% static 'css/add_appointment.css' %}">
<!-- Include Bootstrap Datepicker CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">

<style>
    .datepicker td, .datepicker th {
        font-size: 30px !important;
        padding: 15px !important;
    }
</style>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <h2 class="text-center appointment-title">{% trans 'MakeAppointmentWithLabel' %}</h2>

            <div class="appointment-exp-info">
                <div class="appointment-foto-cont">
                    <div class="flex-center">
                        <img src="{{ expert.profile.avatar.url }}" alt="Avatar" style="border-radius: 50%; max-width: 70px; max-height: 70px;min-width: 70px;min-height: 70px;object-fit: cover;">
                    </div>
                    <div class="user-rating-appointment">Рейтинг:  4.5{{ expert.expertprofile.rating }} &nbsp;</div>
                    <div class="user-rate-and-stars">
                        <!-- stars -->
                    </div>
                </div>
                <div class="appointment-exp-data">
                    <div class="appointment-spans">{{ expert.last_name}} {{ expert.first_name }}</div>
                    <div>{{expert.expertprofile.hour_cost}} Р/час </div>
                    <div class="category-cont-appointments">
                        {% for exp_category in expert.expertprofile.expert_categories.all %}
                            <div class="user-catagory-highlight {{exp_category.slug}}">
                                {{ exp_category.name }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <form method="post">
                {% csrf_token %}

                <!-- Bootstrap Datepicker Div -->
                <div class="form-group appointment-margins">
                    <label for="datepicker" class="appointment-labels">Select Date:</label>
                    <input type="text" class="form-control datepicker" id="datepicker" name="datepicker">

                    <div>  <!-- can you inout it here -->  </div>
                </div>

                <!-- Existing form fields -->
                <div class="form-group appointment-margins">
                    <label for="{{ form.appointment_time.id_for_label }}" class="appointment-labels">Время</label>
                    {{ form.appointment_time }}
                </div>
                <div class="form-group appointment-notes">
                    <label for="notes" class="appointment-labels">Additional Notes</label>
                    {{ form.notes }}
                </div>





                <button type="submit" class="btn btn-primary btn-block appointment-btn">{% trans 'SubmitButtonLabel' %}</button>
            </form>
        </div>
    </div>
</div>

<!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Include Bootstrap JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- Include Bootstrap Datepicker JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<script>
    $(document).ready(function(){
        var datepicker = $('#datepicker').datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true,
            todayHighlight: true,
        }).on('show', function (e) {
            // prevent closing
            e.stopPropagation();
        });

        datepicker.datepicker('show');

        // prevent hide from when clicked outside
        datepicker.data('datepicker').hide = function () {};
    });
</script>

{% endblock %}
