{% load web_tags %}

<style>
    .cbr-rates-container {
        display: flex;
        justify-content: space-around;
        margin: 10px 0 10px 0;
        align-items: center;
        flex-wrap: wrap;
        gap: 5px;
    }

    .arrow-up {
        color: green;
        font-weight: 600;
    }

    .arrow-down {
        color: red;
        font-weight: 600;
    }

    .rate-labels {
        font-size: 12px;
        color: grey;

    }

    .rate-item {
        font-size: 12px;
        font-weight: 500;
        white-space: nowrap;
    }

    .current-rate {
        font-weight: 600;
        font-size: 12px;
    }

    .rate-date {
        font-size: 10px;
    }

    .color-grey {
        color: grey;
    }

</style>

{% show_cbr_rates as rates %}
{% if rates %}

    <div class="cbr-rates-container element-container">

        <div class="rate-labels">Курсы валют</div>
        {% for currency, data in rates.items %}

            {% if currency != 'KEY_RATE' %}

                <div class="rate-item">

                    <span class="current-rate">
                        {% if currency == 'CNY' %}
                            ¥
                        {% elif currency == 'EUR' %}
                            €
                        {% elif currency == 'USD' %}
                            $
                        {% else %}
                            ₽
                        {% endif %}
                    </span>

                    <span class="currency-code">{{ currency }}</span>


                    <span class="current-rate">{{ data.current_rate }} ₽</span>
                    {#                    <span class="change">{{ data.change }}</span>#}


                    <span class="arrow {% if data.change > 0 %}arrow-up{% else %}arrow-down{% endif %}">
                        {% if data.change > 0 %}
                            ↑
                        {% else %}
                            ↓
                        {% endif %}
                    </span>
                    {#                    <span class="change-percentage">{{ data.change_percentage }}</span>#}
                </div>

            {% endif %}

        {% endfor %}


        <div style="display: flex; font-size: 12px; gap: 3px; align-items: baseline;">

            <div class="rate-labels">Ключевая ставка &nbsp;</div>

            <div class="rate-labels rate-date">с {{ rates.KEY_RATE.last_change_date }}</div>

            <div class="arrow {% if rates.KEY_RATE.current_rate > 0 %}arrow-up{% else %}arrow-down{% endif %}">
                {{ rates.KEY_RATE.current_rate }}
            </div>

            <span class="arrow {% if rates.KEY_RATE.current_rate > 0 %}arrow-up{% else %}arrow-down{% endif %}">
                {% if rates.KEY_RATE.current_rate > 0 %}
                    ↑
                {% else %}
                    ↓
                {% endif %}
            </span>
        </div>
    </div>



{% endif %}