{% load web_tags %}
{% load static %}
{% load i18n %}



{%  block extra_static %}
    <link rel="stylesheet" href="{% static 'web/css/profile_content_itemsCSS.css' %}">
{% endblock %}

 <!-- Desktop version -->
<ul class="nav nav-tabs d-none d-lg-flex" style="margin-bottom: 15px; border-bottom: none">
    <li class="nav-item">
        <a href="?tab=articles"
           class="profile-menu-item nav-link {% if request.GET.tab == 'articles' or not request.GET.tab %}active{% endif %}">
            <span class="item-title">{% trans 'ArticlesTabLabel' %}&nbsp;</span>
            <span class="expert-profile-title-content-number">{{ experts_articles_count }}</span>
        </a>
    </li>
    <li class="nav-item">
        <a href="?tab=researches"
           class="profile-menu-item nav-link {% if request.GET.tab == 'researches' %}active{% endif %}">
            <span class="item-title">{% trans 'ResearchesTabLabel' %}&nbsp;</span>
            <span class="expert-profile-title-content-number">0</span>
        </a>
    </li>
    <li class="nav-item">
        <a href="?tab=questions"
           class="profile-menu-item nav-link {% if request.GET.tab == 'questions' %}active{% endif %}">
            <span class="item-title">{% trans 'QuestionsTabLabel' %}&nbsp;</span>
            <span class="expert-profile-title-content-number">0</span>
        </a>
    </li>
    {% if request.path == '/profile' %}
        <li class="nav-item">
            <a href="?tab=consultations"
               class="profile-menu-item nav-link {% if request.GET.tab == 'consultations' %}active{% endif %}">
                <span class="item-title">{% trans 'ConsultationsTabLabel' %}&nbsp;</span>
                <span class="expert-profile-title-content-number">{{ users_appointment_cnt }}</span>
            </a>
        </li>
    {% endif %}
    <li class="nav-item">
        <a href="?tab=reviews"
           class="profile-menu-item nav-link {% if request.GET.tab == 'reviews' %}active{% endif %}">
            <span class="item-title">{% trans 'ReviewsTabLabel' %}&nbsp;</span>
            <span class="expert-profile-title-content-number">0</span>
        </a>
    </li>
    <li class="nav-item">
        <a href="?tab=projects"
           class="profile-menu-item nav-link {% if request.GET.tab == 'projects' %}active{% endif %}">
            <span class="item-title">{% trans 'ProjectsTabLabel' %}&nbsp;</span>
            <span class="expert-profile-title-content-number">{{ projects_count }}</span>
        </a>
    </li>

    {% if request.path == '/profile' %}
    <li class="nav-item">
        <a href="?tab=ratings" class="profile-menu-item nav-link {% if request.GET.tab == 'ratings' %}active{% endif %}">
            <span class="item-title">{% trans 'RatingsTabLabel' %}&nbsp;</span>
        </a>
    </li>
    {% endif %}
</ul>

<!-- Mobile version -->
<div style="overflow-x: auto; margin-bottom: 11px;scrollbar-width: none">
    <ul class="nav nav-pills d-lg-none nav-pills-scrollable" style="display: flex; flex-direction: row; flex-flow: nowrap; gap: 5px">
        <li class="nav-item">
            <a href="?tab=articles" id="articles-tab" class="nav-item-mobile profile-menu-item nav-link {% if request.GET.tab == 'articles' or not request.GET.tab %}active{% endif %}">
                <div class="mobile-prof-cont">
                    <span class="item-title">{% trans 'ArticlesTabLabel' %}&nbsp;</span>
                    <span class="expert-profile-title-content-number" style="font-size: 16px">{{ experts_articles_count }}</span>
                </div>
            </a>
        </li>
        <li class="nav-item">
            <a href="?tab=researches" id="researches-tab" class="nav-item-mobile profile-menu-item nav-link {% if request.GET.tab == 'researches' %}active{% endif %}">
                <div class="mobile-prof-cont">
                    <span class="item-title">{% trans 'ResearchesTabLabel' %}&nbsp;</span>
                    <span class="expert-profile-title-content-number" style="font-size: 16px">0</span>
                </div>
            </a>
        </li>
        <li class="nav-item">
            <a href="?tab=questions" id="questions-tab" class="nav-item-mobile profile-menu-item nav-link {% if request.GET.tab == 'questions' %}active{% endif %}">
                <div class="mobile-prof-cont">
                    <span class="item-title">{% trans 'QuestionsTabLabel' %}&nbsp;</span>
                    <span class="expert-profile-title-content-number" style="font-size: 16px">0</span>
                </div>
            </a>
        </li>
        {% if request.path == '/profile' %}
        <li class="nav-item">
            <a href="?tab=consultations" id="consultations-tab" class="nav-item-mobile profile-menu-item nav-link {% if request.GET.tab == 'consultations' %}active{% endif %}">
                <div class="mobile-prof-cont">
                    <span class="item-title">{% trans 'ConsultationsTabLabel' %}&nbsp;</span>
                    <span class="expert-profile-title-content-number" style="font-size: 16px">{{ users_appointment_cnt }}</span>
                </div>
            </a>
        </li>
        {% endif %}
        <li class="nav-item">
            <a href="?tab=reviews" id="reviews-tab" class="nav-item-mobile profile-menu-item nav-link {% if request.GET.tab == 'reviews' %}active{% endif %}">
                <div class="mobile-prof-cont">
                    <span class="item-title">{% trans 'ReviewsTabLabel' %}&nbsp;</span>
                    <span class="expert-profile-title-content-number" style="font-size: 16px">0</span>
                </div>
            </a>
        </li>
        <li class="nav-item">
            <a href="?tab=projects" id="projects-tab" class="nav-item-mobile profile-menu-item nav-link {% if request.GET.tab == 'projects' %}active{% endif %}">
                <div class="mobile-prof-cont">
                    <span class="item-title">{% trans 'ProjectsTabLabel' %}&nbsp;</span>
                    <span class="expert-profile-title-content-number" style="font-size: 16px">{{ projects_count }}</span>
                </div>
            </a>
        </li>
        {% if request.path == '/profile' %}
        <li class="nav-item">
            <a href="?tab=ratings" id="ratings-tab" class="nav-item-mobile profile-menu-item nav-link {% if request.GET.tab == 'ratings' %}active{% endif %}">
                <div class="mobile-prof-cont">
                    <span class="item-title">{% trans 'RatingsTabLabel' %}</span>
                </div>
            </a>
        </li>
        {% endif %}
    </ul>
</div>



<div id="content-container">
    {% if request.GET.tab == "articles" or not request.GET.tab %}
        {% include 'posts/article/article-profile-list.html' with user=user %}
    {% elif request.GET.tab == "researches" %}
        {# researches_template #}
    {% elif request.GET.tab == "questions" %}
        {# questions_template #}
    {% elif request.GET.tab == "consultations" %}
        <div id="consultations" class="expert-content">
            {% if is_mobile %}
                {% include 'components/appointment/calendar_mobile.html' %}
            {% else %}
                {% include 'components/appointment/calendar.html' %}
            {% endif %}
        </div>
    {% elif request.GET.tab == "reviews" %}
        {# reviews_template #}
    {% elif request.GET.tab == "projects" %}
        {% include 'project_list.html' with user=user %}
    {% elif request.GET.tab == "ratings" %}
        {% include 'profile/expert/rating_list.html' %}
    {% endif %}
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    // Function to scroll to active tab
    function scrollToActiveTab() {
        // desktop
        //const activeDesktopTab = document.querySelector('.d-none.d-lg-flex .nav-link.active');
        //if (activeDesktopTab) {
        //    activeDesktopTab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });
        //}

        // For mobile version
        const activeMobileTab = document.querySelector('.nav-pills-scrollable .nav-link.active');
        if (activeMobileTab) {
            activeMobileTab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }
    }

    // Call the function when the page loads
    scrollToActiveTab();

    // Optionally, you can also call this function when the window is resized
    window.addEventListener('resize', scrollToActiveTab);
});
</script>


