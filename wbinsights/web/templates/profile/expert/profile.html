{% extends 'base123.html' %}
{% load web_tags %}
{% load static %}
{% load i18n %}

{% block center_col %}
    <link rel="stylesheet" href="{% static 'web/css/profile.css' %}">

    <div class="prof-page-cont">

        <a href="{% url 'index' %}" class="to-main-page">
            <i class="bi bi-chevron-left chevro-left-css"></i>
            &nbsp;{% trans 'ToMainPageLabel' %}
        </a>

        {% include 'components/experts/profile_info.html' with user=request.user buttons_template='profile/expert/profile_buttons.html'%}

        <div class="prof-content-links-cont">
            <div class="profile-menu-item" data-content="articles"
                 onclick="showContent('articles')">{% trans 'ArticlesTabLabel' %} &nbsp;<span
                    class="expert-profile-title-content-number">{{ experts_articles_count }}</span></div>
            <div class="profile-menu-item" data-content="researches"
                 onclick="showContent('researches')">{% trans 'ResearchesTabLabel' %} &nbsp;<span
                    class="expert-profile-title-content-number">{{ experts_researches_count }}</span></div>
            <div class="profile-menu-item" data-content="questions"
                 onclick="showContent('questions')">{% trans 'QuestionsTabLabel' %} &nbsp;<span
                    class="expert-profile-title-content-number">{{ experts_questions_count }}</span></div>
            <div class="profile-menu-item" data-content="consultations"
                 onclick="showContent('consultations')">{% trans 'ConsultationsTabLabel' %}
                ({{ experts_appointment_cnt }})
                        <a href="{% url 'profile_edit' %}" type="button"
                           class="btn prof-settings-btn">
                            {% trans 'EditProfileLabel' %}
                        </a>

                        <form method="post" action="{% url 'logout' %}">
                            {% csrf_token %}
                            <button class="btn prof-logout-btn" type="submit">
                                {% trans 'LogoutButtonLabel' %}
                            </button>
                        </form>

                    </div>

                </div>

            </div>


            <div class="bottom-half">

                <div class="bottom-info">

                    <div class="prof-bottom-cont">
                        <span class="bottom-bold-text">{% trans 'EducationLabel' %}: &nbsp;</span>
                        <span class="">{{ request.user.expertprofile.education }}</span>
                    </div>

                    <div class="prof-bottom-cont">

                        <span class="bottom-bold-text">{% trans 'ExperienceLabel' %}:&nbsp;</span>
                        <span class="">{{ request.user.expertprofile.experience }}
                            {% get_write_phrase request.user.expertprofile.experience 'год года лет' %}
                        </span>

                    </div>

                    <div class="prof-about-me-cont">
                        {{ request.user.expertprofile.about }}
                    </div>

                    <div class="prof-bottom-cont">

                        <span class="bottom-bold-text">{% trans 'PricePerHourLabel' %}:&nbsp;</span>
                        <span class=""> {{ request.user.expertprofile.hour_cost }} ₽/час</span>
                    </div>

                </div>

                <div class="prof-content-links-cont">
                    <div class="profile-menu-item" data-content="articles"
                         onclick="showContent('articles')">{% trans 'ArticlesTabLabel' %}
                        &nbsp;<span class="expert-profile-title-content-number">{{ experts_articles_count }}</span>
                    </div>
                    <div class="profile-menu-item" data-content="researches"
                         onclick="showContent('researches')">{% trans 'ResearchesTabLabel' %}
                        &nbsp;<span class="expert-profile-title-content-number">{{ experts_researches_count }}</span>
                    </div>
                    <div class="profile-menu-item" data-content="questions"
                         onclick="showContent('questions')">{% trans 'QuestionsTabLabel' %}
                        &nbsp;<span class="expert-profile-title-content-number">{{ experts_questions_count }}</span>
                    </div>
                    <div class="profile-menu-item" data-content="consultations"
                         onclick="showContent('consultations');getExpertsAppointments()">{% trans 'ConsultationsTabLabel' %}
                        &nbsp;<span
                                class="expert-profile-title-content-number">   ({{ experts_appointment_cnt }})</span>
                    </div>
                    <div class="profile-menu-item" data-content="reviews"
                         onclick="showContent('reviews')">{% trans 'ReviewsTabLabel' %}</div>
                    {#                  <div class="profile-menu-item" data-content="notifications" onclick="showContent('notifications')">Уведомления</div>#}
                </div>

                <div id="articles" class="expert-content" style="display: none;">
                    {% for article in experts_articles %}

                <div class="expert-content-cont">

                            <span class="article-title-loop-exp"><a href="{% url 'article_detail' article.slug %}"
                                                                    style="text-decoration: none;color: #36364b;">{{ article.title }}</a></span>
                            <span class="article-content-loop-exp">{{ article.description }}</span>
                            <span class="link-read-post">
                                <a href="{{ article.get_absolute_url }}" style="color:black;"
                                   class="link-read-post">{% trans 'ReadPostLabel' %} &nbsp;
                                    <i class="bi bi-chevron-down" style="color:black; scale:1.3"></i>
                                </a>
                            </span>

                            <div class="article-comments-andshare-cont-exp">
                                <div class="article-comments-exp">
                                    <i class="bi bi-chat-left-text" style="color:grey;"></i>&nbsp; 104
                                </div>
                                <div class="article-share-exp">
                                    <i class="bi bi-calendar2-week"
                                       style="color:grey; "></i>&nbsp; {{ article.time_update|custom_time_display }}

                                </div>
                            </div>

                        </div>

                        <hr>

                    {% endfor %}
                </div>


                <div id="researches" class="expert-content" style="display: none;">
                    <span>test research</span>
                    {% for research in experts_researches %}
                    {% endfor %}
                </div>

                <div id="questions" class="expert-content" style="display: none;">
                    <span>test questions</span>
                    {% for research in experts_researches %}
                    {% endfor %}
                </div>

                <div id="consultations" class="expert-content" style="display: none;">

                    <div id="event-calendar"></div>


                </div>

                <div id="reviews" class="expert-content" style="display: none;">
                    <span>test reviews</span>
                    {% for research in experts_researches %}
                    {% endfor %}
                </div>
                <div id="notifications" class="expert-content" style="display: none;">
                    <span>test notifications</span>
                    {% for research in experts_researches %}
                    {% endfor %}
                </div>


        <div id="projects" class="expert-content" style="display: none;">
            <span>test notifications</span>
            <a href="{% url 'project_add' %}">Добавить проект</a>

            {% for expert_project in experts_projects %}
            {% endfor %}
        </div>

    </div>

    <script>
        function showContent(contentId) {

            $('.expert-content').each(function () {

                if ($(this).attr("id") == contentId) {
                    $(this).show()
                } else {
                    $(this).hide()
                }

            })

            $('.profile-menu-item').each(function () {

                if ($(this).attr("data-content") == contentId) {
                    $(this).addClass('selected')
                } else {
                    $(this).removeClass('selected')
                }

            })
        }

        $(document).ready(function () {
            showContent('articles')
        })

    </script>

    {% include 'components/appointment/calendar.html' with calendar_event_id='event-calendar' %}

{% endblock %}
