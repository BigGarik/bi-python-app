{% extends 'base.html' %}

{% block content %}

    <div class="post-menu">
        <a href="{% url 'research_list' %}" class="post-menu-item" onclick="showContent(this, 'research_list')">Исследования</a>

        <a href="{% url 'experts_list' %}" class="post-menu-item" onclick="showContent(this, 'experts_list')">Эксперты</a>
        <a href="{% url 'article_list' %}" class="post-menu-item" onclick="showContent(this, 'article_list')">Статьи</a>
        <a href="{% url 'question_answer_list' %}" class="post-menu-item" onclick="showContent(this, 'question_answer_list')">Вопрос-ответ</a>
    </div>

    

    <div id="research_list" class="content-block">
        {% block research_list %}{% endblock %}
    </div>
    <div id="experts_list" class="content-block">
        {% block experts_list %}{% endblock %}
    </div>
    <div id="article_list" class="content-block">  
        {% block posts_content %}{% endblock %}
    </div>
    <div id="question_answer_list" class="content-block" >
        {% block question_answer_list %}{% endblock %}
    </div>

    <script>

        function showContent(element, contentId) {

            //hide all conmtent b;locks
            var contentBlocks = document.getElementsByClassName('content-block');
            for (var i = 0; i < contentBlocks.length; i++) {
                contentBlocks[i].style.display = 'none';
            }

            //remove 'selected from all catagories'
            var menuItems = document.getElementsByClassName('post-menu-item');
            for (var i = 0; i < menuItems.length; i++) {
                menuItems[i].classList.remove('selected');
            }

            //show the selected block
            document.getElementById(contentId).style.display = 'block';

            //add selected to the block
            element.classList.add('selected');

        }

        // selected current url menu item
        document.addEventListener("DOMContentLoaded", function() {

            var currentUrl = window.location.pathname;
            var menuItems = document.getElementsByClassName('post-menu-item');
            
            for (var i = 0; i < menuItems.length; i++) {
                var href = menuItems[i].getAttribute("href");

                if (currentUrl === href) {
                    menuItems[i].classList.add('selected');
                    break; 
                }
            }
        });

    </script>

{% endblock %}
